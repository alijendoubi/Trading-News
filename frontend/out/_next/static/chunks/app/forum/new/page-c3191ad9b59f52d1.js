(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[730],{95291:function(e,t,r){Promise.resolve().then(r.bind(r,903))},903:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var a=r(37821),n=r(58078),s=r(58504),o=r(88620),c=r(17737),i=r(74542),l=r(24807),d=r(7346),u=r(35684),h=r(13022);function m(){let e=(0,s.useRouter)(),{isAuthenticated:t}=(0,h.a)(),[r,m]=(0,n.useState)([]),[g,f]=(0,n.useState)(""),[x,p]=(0,n.useState)(""),[b,v]=(0,n.useState)(""),[y,j]=(0,n.useState)(!1),[w,z]=(0,n.useState)("");(0,n.useEffect)(()=>{if(!t){e.push("/login");return}k()},[t,e]);let k=async()=>{try{let e=await fetch("".concat("http://localhost:3001/api","/forum/categories")),t=await e.json();m(t.categories||[])}catch(e){console.error("Error fetching categories:",e)}},S=async t=>{if(t.preventDefault(),z(""),!g.trim()||!x.trim()||!b){z("Please fill in all fields");return}j(!0);try{let t=localStorage.getItem("token"),r=await fetch("".concat("http://localhost:3001/api","/forum/threads"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({title:g,content:x,category_id:parseInt(b)})});if(!r.ok){let e=await r.json();throw Error(e.error||"Failed to create thread")}let a=await r.json();e.push("/forum/".concat(a.thread.id))}catch(e){z(e.message||"Failed to create thread")}finally{j(!1)}};return t?(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(i.default,{href:"/forum",children:(0,a.jsxs)(d.z,{variant:"ghost",size:"sm",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4 mr-2"}),"Back to Forum"]})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-zinc-100",children:"Create New Thread"})]}),(0,a.jsx)(l.Z,{children:(0,a.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[w&&(0,a.jsx)("div",{className:"bg-danger/10 border border-danger/50 rounded-lg p-4 text-danger text-sm",children:w}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-zinc-300 mb-2",children:"Category *"}),(0,a.jsxs)("select",{id:"category",value:b,onChange:e=>v(e.target.value),className:"w-full px-4 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-zinc-100 focus:outline-none focus:ring-2 focus:ring-primary",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select a category"}),r.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-zinc-300 mb-2",children:"Thread Title *"}),(0,a.jsx)(u.I,{id:"title",type:"text",value:g,onChange:e=>f(e.target.value),placeholder:"What's your thread about?",required:!0,maxLength:255}),(0,a.jsxs)("p",{className:"text-xs text-zinc-500 mt-1",children:[g.length,"/255 characters"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-zinc-300 mb-2",children:"Content *"}),(0,a.jsx)("textarea",{id:"content",value:x,onChange:e=>p(e.target.value),placeholder:"Share your thoughts, questions, or insights...",required:!0,rows:12,className:"w-full px-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-zinc-100 placeholder-zinc-500 focus:outline-none focus:ring-2 focus:ring-primary resize-y"}),(0,a.jsx)("p",{className:"text-xs text-zinc-500 mt-1",children:"Be descriptive and provide as much detail as possible"})]}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,a.jsx)(i.default,{href:"/forum",children:(0,a.jsx)(d.z,{type:"button",variant:"secondary",children:"Cancel"})}),(0,a.jsx)(d.z,{type:"submit",variant:"primary",disabled:y,children:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Creating..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"Create Thread"]})})]})]})}),(0,a.jsxs)(l.Z,{className:"bg-zinc-800/50",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-zinc-100 mb-3",children:"Community Guidelines"}),(0,a.jsxs)("ul",{className:"space-y-2 text-sm text-zinc-400",children:[(0,a.jsx)("li",{children:"• Be respectful and professional in all discussions"}),(0,a.jsx)("li",{children:"• Stay on topic and choose the appropriate category"}),(0,a.jsx)("li",{children:"• Provide clear titles that describe your thread"}),(0,a.jsx)("li",{children:"• Search for existing threads before creating duplicates"}),(0,a.jsx)("li",{children:"• No spam, promotional content, or offensive language"})]})]})]}):null}},7346:function(e,t,r){"use strict";r.d(t,{z:function(){return n}});var a=r(37821);r(58078);let n=e=>{let{variant:t="primary",size:r="md",className:n="",children:s,...o}=e;return(0,a.jsx)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary hover:bg-primary-hover text-white shadow-lg hover:shadow-glow-blue",secondary:"bg-zinc-800 hover:bg-zinc-700 text-zinc-100 border border-zinc-700",danger:"bg-danger hover:bg-danger-dark text-white shadow-lg hover:shadow-glow-red",success:"bg-success hover:bg-success-dark text-white shadow-lg hover:shadow-glow-green",ghost:"bg-transparent hover:bg-zinc-800 text-zinc-100"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[r]," ").concat(n),...o,children:s})}},24807:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(37821);r(58078);let n=e=>{let{children:t,className:r="",hover:n=!1,gradient:s=!1,glass:o=!1,onClick:c}=e;return(0,a.jsx)("div",{className:"".concat("rounded-lg p-6 border border-zinc-800"," ").concat(o?"glass":s?"card-gradient":"bg-zinc-900"," ").concat(n?"hover:border-zinc-700 hover:shadow-lg transition-all duration-300":""," ").concat(r),onClick:c,children:t})}},35684:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var a=r(37821);r(58078);let n=e=>{let{label:t,error:r,className:n="",...s}=e;return(0,a.jsxs)("div",{className:"w-full",children:[t&&(0,a.jsx)("label",{className:"block text-sm font-medium text-zinc-400 mb-2",children:t}),(0,a.jsx)("input",{className:"\n          w-full px-4 py-2 \n          bg-zinc-800 border rounded-lg\n          text-zinc-100 placeholder-zinc-500\n          focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent\n          disabled:opacity-50 disabled:cursor-not-allowed\n          ".concat(r?"border-danger":"border-zinc-700","\n          ").concat(n,"\n        "),...s}),r&&(0,a.jsx)("p",{className:"mt-1 text-sm text-danger",children:r})]})}},97294:function(e,t,r){"use strict";r.d(t,{x:function(){return s}});var a=r(39190),n=r(92399);let s=a.Z.create({baseURL:n.C,headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),s.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login"),Promise.reject(e)}),t.Z=s},13022:function(e,t,r){"use strict";r.d(t,{AuthProvider:function(){return c},a:function(){return i}});var a=r(37821),n=r(58078),s=r(97294);let o=(0,n.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,n.useState)(null),[i,l]=(0,n.useState)(!0);(0,n.useEffect)(()=>{d()},[]);let d=async()=>{try{if(localStorage.getItem("accessToken")){let e=await s.x.get("/auth/me");c(e.data.data.user)}}catch(e){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}finally{l(!1)}},u=async(e,t)=>{let{user:r,tokens:a}=(await s.x.post("/auth/login",{email:e,password:t})).data.data;localStorage.setItem("accessToken",a.accessToken),localStorage.setItem("refreshToken",a.refreshToken),c(r)},h=async(e,t,r)=>{let{user:a,tokens:n}=(await s.x.post("/auth/register",{email:e,password:t,name:r})).data.data;localStorage.setItem("accessToken",n.accessToken),localStorage.setItem("refreshToken",n.refreshToken),c(a)},m=async()=>{try{let e=localStorage.getItem("refreshToken");e&&await s.x.post("/auth/logout",{refreshToken:e})}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),c(null)}};return(0,a.jsx)(o.Provider,{value:{user:r,loading:i,login:u,register:h,logout:m,isAuthenticated:!!r},children:t})}function i(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},92399:function(e,t,r){"use strict";r.d(t,{C:function(){return a}});let a="http://localhost:3001"},88620:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(38322).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},17737:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(38322).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},58504:function(e,t,r){"use strict";var a=r(93226);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[190,534,115,364,744],function(){return e(e.s=95291)}),_N_E=e.O()}]);