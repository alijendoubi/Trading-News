(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[533],{52949:function(e,t,s){Promise.resolve().then(s.bind(s,60343))},60343:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(37821),r=s(58078),o=s(58504),n=s(13022),l=s(97294);function c(){let{isAuthenticated:e,loading:t}=(0,n.a)(),s=(0,o.useRouter)(),[c,i]=(0,r.useState)([]),[u,d]=(0,r.useState)(!0),[m,x]=(0,r.useState)(""),[h,g]=(0,r.useState)("crypto"),[f,p]=(0,r.useState)(""),[v,b]=(0,r.useState)("");(0,r.useEffect)(()=>{t||e?e&&y():s.push("/login")},[e,t,s]);let y=async()=>{try{let e=await l.x.get("/api/watchlists");i(e.data.data||[])}catch(s){var e,t;b((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to load watchlist")}finally{d(!1)}},w=async e=>{e.preventDefault(),b("");try{await l.x.post("/api/watchlists",{assetId:m,assetType:h,assetName:f}),x(""),p(""),y()}catch(e){var t,s;b((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to add to watchlist")}},j=async e=>{try{await l.x.delete("/api/watchlists/".concat(e)),y()}catch(e){var t,s;b((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to remove from watchlist")}};return t||u?(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-8 flex items-center justify-center",children:(0,a.jsx)("p",{children:"Loading..."})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 text-white p-4 sm:p-6 lg:p-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-6 sm:mb-8",children:"My Watchlist"}),v&&(0,a.jsx)("div",{className:"mb-6 bg-red-900/50 border border-red-700 rounded-lg p-4",children:(0,a.jsx)("p",{className:"text-red-200",children:v})}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6 mb-6 sm:mb-8",children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4",children:"Add Asset"}),(0,a.jsxs)("form",{onSubmit:w,className:"flex flex-col sm:flex-row gap-3 sm:gap-4 flex-wrap",children:[(0,a.jsx)("input",{type:"text",placeholder:"Asset ID (e.g., bitcoin, AAPL)",value:m,onChange:e=>x(e.target.value),required:!0,className:"flex-1 min-w-full sm:min-w-[200px] px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"}),(0,a.jsx)("input",{type:"text",placeholder:"Display Name",value:f,onChange:e=>p(e.target.value),required:!0,className:"flex-1 min-w-full sm:min-w-[200px] px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base"}),(0,a.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"w-full sm:w-auto px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm sm:text-base",children:[(0,a.jsx)("option",{value:"crypto",children:"Crypto"}),(0,a.jsx)("option",{value:"stock",children:"Stock"}),(0,a.jsx)("option",{value:"forex",children:"Forex"})]}),(0,a.jsx)("button",{type:"submit",className:"w-full sm:w-auto px-6 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition-colors text-sm sm:text-base",children:"Add"})]})]}),(0,a.jsx)("div",{className:"grid gap-4",children:0===c.length?(0,a.jsx)("div",{className:"bg-gray-800 rounded-lg p-8 text-center text-gray-400",children:(0,a.jsx)("p",{children:"Your watchlist is empty. Add some assets to get started!"})}):c.map(e=>(0,a.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4 sm:p-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4 hover:bg-gray-750 transition-colors",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-semibold",children:e.assetName}),(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-gray-400",children:[e.assetType.toUpperCase()," â€¢ ",e.assetId]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 sm:gap-6 w-full sm:w-auto",children:[e.currentPrice&&(0,a.jsxs)("div",{className:"text-left sm:text-right flex-1 sm:flex-initial",children:[(0,a.jsxs)("p",{className:"text-lg sm:text-xl font-bold",children:["$",e.currentPrice.toLocaleString()]}),void 0!==e.change24h&&(0,a.jsxs)("p",{className:"text-xs sm:text-sm ".concat(e.change24h>=0?"text-green-400":"text-red-400"),children:[e.change24h>=0?"+":"",e.change24h.toFixed(2),"%"]})]}),(0,a.jsx)("button",{onClick:()=>j(e.assetId),className:"px-4 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-xs sm:text-sm font-medium transition-colors whitespace-nowrap",children:"Remove"})]})]},e.assetId))})]})})}},97294:function(e,t,s){"use strict";s.d(t,{x:function(){return o}});var a=s(39190),r=s(92399);let o=a.Z.create({baseURL:r.C,headers:{"Content-Type":"application/json"}});o.interceptors.request.use(e=>{let t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),o.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),window.location.href="/login"),Promise.reject(e)}),t.Z=o},13022:function(e,t,s){"use strict";s.d(t,{AuthProvider:function(){return l},a:function(){return c}});var a=s(37821),r=s(58078),o=s(97294);let n=(0,r.createContext)(void 0);function l(e){let{children:t}=e,[s,l]=(0,r.useState)(null),[c,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{u()},[]);let u=async()=>{try{if(localStorage.getItem("accessToken")){let e=await o.x.get("/auth/me");l(e.data.data.user)}}catch(e){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken")}finally{i(!1)}},d=async(e,t)=>{let{user:s,tokens:a}=(await o.x.post("/auth/login",{email:e,password:t})).data.data;localStorage.setItem("accessToken",a.accessToken),localStorage.setItem("refreshToken",a.refreshToken),l(s)},m=async(e,t,s)=>{let{user:a,tokens:r}=(await o.x.post("/auth/register",{email:e,password:t,name:s})).data.data;localStorage.setItem("accessToken",r.accessToken),localStorage.setItem("refreshToken",r.refreshToken),l(a)},x=async()=>{try{let e=localStorage.getItem("refreshToken");e&&await o.x.post("/auth/logout",{refreshToken:e})}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),l(null)}};return(0,a.jsx)(n.Provider,{value:{user:s,loading:c,login:d,register:m,logout:x,isAuthenticated:!!s},children:t})}function c(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},92399:function(e,t,s){"use strict";s.d(t,{C:function(){return a}});let a="http://localhost:3001"},58504:function(e,t,s){"use strict";var a=s(93226);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[190,115,364,744],function(){return e(e.s=52949)}),_N_E=e.O()}]);